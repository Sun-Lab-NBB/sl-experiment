from typing import Any
from pathlib import Path

from _typeshed import Incomplete
from numpy.typing import NDArray as NDArray
from sl_shared_assets import (
    SessionData,
    SurgeryData as SurgeryData,
    MesoscopeGoogleSheets as MesoscopeGoogleSheets,
)

from .tools import (
    MesoscopeData as MesoscopeData,
    mesoscope_vr_sessions as mesoscope_vr_sessions,
    get_system_configuration as get_system_configuration,
)
from ..shared_components import (
    WaterLog as WaterLog,
    SurgeryLog as SurgeryLog,
)

_METADATA_SCHEMA: Incomplete
_IGNORED_METADATA_FIELDS: Incomplete

def _verify_and_get_stack_size(file: Path) -> int: ...
def _process_stack(
    tiff_path: Path, first_frame_number: int, output_directory: Path, batch_size: int = 100
) -> dict[str, Any]: ...
def _process_invariant_metadata(frame_stack_path: Path, ops_path: Path, metadata_path: Path) -> None: ...
def _preprocess_video_names(session_data: SessionData) -> None: ...
def _pull_mesoscope_data(session_data: SessionData, mesoscope_data: MesoscopeData, threads: int = 30) -> None: ...
def _preprocess_mesoscope_directory(
    session_data: SessionData, mesoscope_data: MesoscopeData, processes: int
) -> None: ...
def _preprocess_log_directory(session_data: SessionData, processes: int) -> None: ...
def _preprocess_google_sheet_data(session_data: SessionData, sheets_data: MesoscopeGoogleSheets) -> None: ...
def _push_data(session_data: SessionData, mesoscope_data: MesoscopeData, threads: int) -> None: ...
def rename_mesoscope_directory(mesoscope_data: MesoscopeData) -> None: ...
def preprocess_session_data(session_data: SessionData) -> None: ...
def purge_session(session_data: SessionData) -> None: ...
def migrate_animal_between_projects(animal: str, source_project: str, target_project: str) -> None: ...
